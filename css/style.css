/* ================== CSS Variables ================== */
:root {
    /* Typography */
    --font-primary: 'Poppins', sans-serif;
    --font-secondary: 'Roboto', sans-serif; /* Font phụ cho nội dung thường */
    --font-headings: 'Montserrat', sans-serif;
    --font-size-base: 16px;
    --line-height-base: 1.7;

    /* --- Default Colors (Dark Mode) --- */
    --color-bg-dark-1: #0D1117;
    --color-bg-dark-2: #161B22;
    --color-bg-dark-3: #21262d;
    --color-border: #30363d;
    --color-text-light: #c9d1d9;
    --color-text-secondary: #8b949e;
    --color-text-headings: #f0f6fc;
    --color-accent: #58a6ff;
    --color-accent-rgb: 88, 166, 255; /* RGB for rgba() */
    --color-accent-hover: #79c0ff;
    --color-accent-glow: rgba(var(--color-accent-rgb), 0.4);
    --color-danger: #f85149;
    --color-success: #34a853;
    --color-verified: #1da1f2;
    --color-star-rating: #ffc107;
    --color-focus-shadow: rgba(var(--color-accent-rgb), 0.4);
    --shadow-soft: 0 2px 8px rgba(0, 0, 0, 0.2);
    --shadow-medium: 0 5px 18px rgba(0, 0, 0, 0.25);
    --shadow-large: 0 10px 35px rgba(var(--color-accent-rgb), 0.15);
    
    /* --- Border Radius Definitions --- */
    --border-radius-small: 6px;  /* Slightly larger */
    --border-radius-medium: 10px; /* Slightly larger */
    --border-radius-large: 20px; /* Slightly larger */
    --border-radius-xl: 30px;
    --border-radius-circle: 50%;

    /* --- Light Mode Color Definitions --- */
    --color-bg-light-1: #ffffff;
    --color-bg-light-2: #f7f9fc; /* Lighter secondary bg */
    --color-bg-light-3: #edf2f7; /* Lighter tertiary bg */
    --color-border-light: #e2e8f0; /* Lighter border */
    --color-text-dark: #2d3748;  /* Darker text for better contrast */
    --color-text-secondary-light: #718096;
    --color-text-headings-light: #1a202c;
    --color-accent-light: #3182ce; /* Deeper blue for light mode */
    --color-accent-light-rgb: 49, 130, 206;
    --color-accent-hover-light: #2b6cb0;
    --color-accent-glow-light: rgba(var(--color-accent-light-rgb), 0.3);
    --color-focus-shadow-light: rgba(var(--color-accent-light-rgb), 0.3);

    /* Spacing & Sizing */
    --spacing-unit: 8px;
    --transition-speed-fast: 0.2s;
    --transition-speed: 0.3s;
    --transition-speed-slow: 0.5s;
    --theme-transition-duration: 0.4s;
}

/* --- Apply Light Theme Colors --- */
/* Chúng ta dùng data attribute trên thẻ <html> */
html[data-theme='light'] {
    --color-bg-dark-1: var(--color-bg-light-1); /* Ghi đè các biến dark mode */
    --color-bg-dark-2: var(--color-bg-light-2);
    --color-border: var(--color-border-light);
    --color-text-light: var(--color-text-dark);
    --color-text-secondary: var(--color-text-secondary-light);
    --color-text-headings: var(--color-text-headings-light);
    --color-accent: var(--color-accent-light);
    --color-accent-hover: var(--color-accent-hover-light);
    --color-focus-shadow: var(--color-focus-shadow-light);

    /* --- Specific Overrides for Light Mode --- */
    /* Đảm bảo text trên button primary đủ sáng/tối */
    .btn-primary {
        color: var(--color-bg-light-1); /* Chữ trắng trên nền accent */
    }
    .btn-primary:hover,
    .btn-primary:focus-visible {
        color: var(--color-bg-light-1);
    }

    /* Nút phụ */
     .btn-secondary {
         color: var(--color-text-dark);
         border-color: var(--color-border-light);
     }
     .btn-secondary:hover,
     .btn-secondary:focus-visible {
         background-color: var(--color-bg-light-2);
         border-color: var(--color-text-secondary-light);
         color: var(--color-text-dark);
     }

     /* Điều khiển âm lượng/đồng hồ */
     #volume-btn, #clock {
         background-color: rgba(246, 248, 250, 0.85); /* Nền sáng mờ */
         backdrop-filter: blur(5px);
         border: 1px solid var(--color-border-light);
         color: var(--color-text-dark);
     }
      #volume-btn:hover {
         background-color: rgba(230, 233, 237, 0.9);
     }
     #volume-btn.muted {
        color: var(--color-text-secondary-light);
     }
      #volume-btn.muted:hover {
        color: var(--color-text-dark);
     }
     #volume-slider {
        background: var(--color-border-light);
     }
     #volume-slider::-webkit-slider-thumb {
         background: var(--color-accent-light);
         border: 2px solid var(--color-bg-light-1);
     }
     #volume-slider::-moz-range-thumb {
         background: var(--color-accent-light);
         border: 2px solid var(--color-bg-light-1);
     }
     #volume-slider::-moz-range-track {
         background: var(--color-border-light);
     }

     /* Modal/Overlay */
     #song-selection-modal, .prompt-overlay, .lightbox-overlay {
        background-color: rgba(255, 255, 255, 0.8); /* Overlay sáng */
        backdrop-filter: blur(4px);
     }
     .modal-content, .prompt-box {
        background-color: var(--color-bg-light-2);
        border-color: var(--color-border-light);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* Shadow nhẹ hơn */
     }
     #song-list li {
         border-bottom-color: var(--color-border-light);
         color: var(--color-text-dark);
     }
      #song-list li:hover {
         background-color: var(--color-border-light);
         color: var(--color-accent-hover-light);
      }
     #lightbox-close {
         color: #555; /* Nút close tối hơn */
     }
      #lightbox-close:hover {
         color: var(--color-accent-light);
     }

     /* Forms */
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="search"],
    input[type="number"],
    input[type="tel"],
    input[type="url"],
    textarea,
    select {
      background-color: var(--color-bg-light-1);
      border: 1px solid var(--color-border-light);
      color: var(--color-text-dark);
    }
    select { /* Cập nhật màu mũi tên select */
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%2357606a'%3E%3Cpath fill-rule='evenodd' d='M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z'/%3E%3C/svg%3E");
    }

     /* Skills */
     .skill-tags li {
        background-color: var(--color-border-light);
        color: var(--color-text-secondary-light);
     }
     .skill-tags li::before {
        background: linear-gradient(90deg, var(--color-accent-light), var(--color-accent-hover-light));
     }
      .skill-tags li:hover {
        color: var(--color-bg-light-1); /* Chữ trắng khi hover */
        box-shadow: 0 5px 12px var(--color-focus-shadow-light);
      }

     /* Loading bar */
     .loading-bar {
         background-color: var(--color-border-light);
     }
      .loading-bar::after {
         background: linear-gradient(90deg, var(--color-accent-light), var(--color-accent-hover-light));
      }

      /* Payment items */
      .payment-item {
           background-color: var(--color-bg-light-1);
           border-color: var(--color-border-light);
      }
       .payment-item:hover {
           border-color: var(--color-accent-light);
           box-shadow: 0 3px 10px rgba(9, 105, 218, 0.1);
       }

        /* Project items */
        .project-item {
            background-color: var(--color-bg-light-1);
            border-color: var(--color-border-light);
        }
        .project-item h3 {
            color: var(--color-text-headings-light);
        }
        .project-item p {
            color: var(--color-text-dark);
        }


       /* Lobby */
       #lobby-screen::before { /* Làm tối ảnh nền đi một chút ở light mode */
            filter: brightness(0.85);
       }
        .lobby-content {
            background-color: rgba(255, 255, 255, 0.8); /* Nền content sáng mờ */
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
         .lobby-icon img {
             background: rgba(0, 0, 0, 0.05);
         }
        #lobby-screen h2 {
            color: var(--color-text-headings-light);
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }
        #lobby-screen p {
             color: var(--color-text-secondary-light);
        }

        /* Status Indicator Pulse - có thể giữ nguyên hoặc chỉnh màu bóng */
         @keyframes pulse-light {
             0% { box-shadow: 0 0 0 0 rgba(52, 168, 83, 0.5); opacity: 1;}
             70% { box-shadow: 0 0 0 10px rgba(52, 168, 83, 0); opacity: 0.5; }
             100% { box-shadow: 0 0 0 0 rgba(52, 168, 83, 0); opacity: 1;}
         }
         .status-indicator {
             box-shadow: 0 0 8px rgba(52, 168, 83, 0.7);
             animation: pulse-light 2s infinite ease-in-out;
         }
}

/* Thêm transition cho việc chuyển đổi màu sắc mượt mà */
body, .content-section, .payment-item, .project-item, input, textarea, select, .btn,
#volume-btn, #clock, .modal-content, .prompt-box, .lobby-content,
.skill-tags li, #song-list li /* Thêm các selector khác nếu cần */
{
    transition: background-color var(--transition-speed) ease,
                color var(--transition-speed) ease,
                border-color var(--transition-speed) ease;
}
/* Các transition phức tạp hơn đã có sẵn trên các element (vd: transform) */

/* ================== General Styles & Reset ================== */
*,
*::before,
*::after { /* Áp dụng box-sizing cho cả pseudo-elements */
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    outline: none; /* Bỏ outline mặc định */
}

/* Default focus style for accessibility */
*:focus-visible {
   outline: 2px solid var(--color-accent-hover);
   outline-offset: 2px;
   box-shadow: 0 0 0 3px var(--color-focus-shadow);
}

html {
    scroll-behavior: smooth;
    font-size: var(--font-size-base);
}

body {
    font-family: 'Roboto', sans-serif;
    background-color: var(--color-bg-dark-1);
    color: var(--color-text-light);
    line-height: var(--line-height-base);
    overflow-x: hidden;
    position: relative;
    -webkit-font-smoothing: antialiased; /* Làm mịn font trên Webkit */
    -moz-osx-font-smoothing: grayscale; /* Làm mịn font trên Firefox */
}

a {
    color: var(--color-accent);
    text-decoration: none;
    transition: color var(--transition-speed) ease;
}

a:hover,
a:focus-visible {
    color: var(--color-accent-hover);
    text-decoration: underline;
}

img, svg { /* Áp dụng cho cả SVG */
    max-width: 100%;
    height: auto;
    display: block;
}

h1, h2, h3, h4, h5, h6 {
    font-family: 'Montserrat', sans-serif;
    font-weight: 700;
    /* color: #333; -- Bỏ dòng này vì đã có var ở dưới */
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    color: var(--color-text-headings);
    line-height: 1.3;
}

h1 { font-size: 2.25rem; }
h2 { font-size: 1.75rem; margin-bottom: calc(var(--spacing-unit) * 3); }
h3 { font-size: 1.25rem; }
h4 { font-size: 1.1rem; }

/* ================== Utility Classes ================== */
.mb-1 { margin-bottom: var(--spacing-unit); }
.mb-2 { margin-bottom: calc(var(--spacing-unit) * 2); }
.mb-3 { margin-bottom: calc(var(--spacing-unit) * 3); }
.mt-1 { margin-top: var(--spacing-unit); }
.mt-2 { margin-top: calc(var(--spacing-unit) * 2); }
.mt-3 { margin-top: calc(var(--spacing-unit) * 3); }

.text-center { text-align: center; }
.text-danger { color: var(--color-danger); }
.text-success { color: var(--color-success); }
.text-secondary { color: var(--color-text-secondary); }

/* Class để ẩn nội dung cho trình đọc màn hình nhưng vẫn giữ nó trong DOM */
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}


/* ================== Buttons ================== */
.btn {
    font-family: inherit;
    font-weight: 600;
    padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 2.5);
    border: 1px solid transparent;
    border-radius: var(--border-radius-medium);
    cursor: pointer;
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, border-color var(--transition-speed) ease, transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    display: inline-block;
    text-align: center;
    white-space: nowrap;
    user-select: none;
    vertical-align: middle;
}

.btn:hover,
.btn:focus-visible {
    transform: translateY(-3px) scale(1.03); /* Nhấn mạnh hơn */
    box-shadow: 0 6px 12px rgba(var(--color-accent-rgb, 88, 166, 255), 0.3); /* Sử dụng RGB của accent color */
}

.btn-primary {
    background-color: var(--color-accent);
    color: var(--color-bg-dark-1); /* Đảm bảo chữ đủ tương phản trên nền tối */
    border-color: var(--color-accent);
}
.btn-primary:hover,
.btn-primary:focus-visible {
    background-color: var(--color-accent-hover);
    border-color: var(--color-accent-hover);
    color: var(--color-bg-dark-1); /* Giữ màu chữ khi hover */
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(88, 166, 255, 0.2);
}

.btn-secondary {
    background-color: transparent;
    border: 1px solid var(--color-border);
    color: var(--color-text-light);
}
.btn-secondary:hover,
.btn-secondary:focus-visible {
    background-color: var(--color-bg-dark-2);
    border-color: var(--color-text-secondary);
    color: var(--color-text-light);
}

.btn-tertiary {
    background-color: var(--color-border);
    color: var(--color-text-secondary);
    border-color: var(--color-border);
}
.btn-tertiary:hover,
.btn-tertiary:focus-visible {
    background-color: #444c56; /* Màu tối hơn một chút */
    color: var(--color-text-light);
    border-color: #444c56;
}

.btn-danger {
    background-color: var(--color-danger);
    color: #fff;
    border-color: var(--color-danger);
}
.btn-danger:hover,
.btn-danger:focus-visible {
    background-color: #d73a49;
    border-color: #d73a49;
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(248, 81, 73, 0.2);
}

.btn-small {
    padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5);
    font-size: 0.875rem;
}
/* ================== Loading Screen ================== */
#loading-screen {
    background-color: var(--color-bg-dark-1);
    text-align: center;
}

.loading-bar {
    /* width: 120px; -- width sẽ được set bởi keyframes */
    height: 10px;
    position: relative;
    margin: calc(var(--spacing-unit) * 2.5) auto 0 auto;
    overflow: hidden;
    border-radius: 5px;
    /* animation: fill-bar 3s linear forwards; -- animation được chuyển xuống ::after */
    /* width: 0%; -- width ban đầu của ::after là 0% */
    background-color: var(--color-border); /* Màu nền cho thanh bar */
    transform-origin: left center;
}

/* Sửa lại animation cho loading bar, đã có trong file gốc */
.loading-bar::after {
    content: '';
    display: block;
    height: 100%;
    width: 0%; /* Bắt đầu từ 0% */
    background: linear-gradient(90deg, var(--color-accent), var(--color-accent-hover)); /* Gradient màu nhấn */
    border-radius: 5px;
    animation: fill-loading-bar 3s linear forwards; /* Animation làm đầy thanh bar */
}

@keyframes fill-loading-bar {
    0% { width: 0%; }
    100% { width: 100%; }
}

.loading-bar.finished::after {
    animation: none;
    width: 100%;
}


.loading-avatar {
    width: 100px;
    height: 100px;
    border-radius: var(--border-radius-circle);
    margin-bottom: calc(var(--spacing-unit) * 2.5);
    object-fit: cover;
    animation: pulse-avatar 2s infinite ease-in-out; /* Thêm animation */
}

@keyframes pulse-avatar {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); } /* Hơi to ra */
    100% { transform: scale(1); }
}

#loading-screen h1 {
    font-size: 1.5rem;
    color: var(--color-text-headings);
    margin-bottom: var(--spacing-unit);
}
#loading-screen p {
    font-size: 0.9rem;
    color: var(--color-text-secondary);
}

/* ================== Screen Management & Transitions ================== */
.screen {
    min-height: 100vh;
    width: 100%;
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    z-index: 100;
    transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out, visibility 0s linear 0.6s;
    overflow: hidden;
}

.screen.active {
    opacity: 1;
    visibility: visible;
    z-index: 101;
    transform: translateY(0);
    transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out, visibility 0s linear 0s;
}

.screen.fade-out {
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out, visibility 0s linear 0.6s;
}

/* ================== Loading Screen (Đã có ở trên, giữ lại để đảm bảo) ================== */
#loading-screen { /* CSS cho #loading-screen đã có ở trên */
    transform: translateY(-20px); /* Hiệu ứng trượt ban đầu */
}

#loading-screen.active {
     transform: translateY(0);
}


/* ================== Lobby Screen ================== */
#lobby-screen {
    color: var(--color-text-light);
    text-align: center;
    cursor: pointer;
    transform: translateY(-20px); /* Hiệu ứng trượt ban đầu */
}

#lobby-screen.active {
     transform: translateY(0);
}

#lobby-screen::before {
    content: '';
    position: absolute;
    inset: 0;
    /* KIỂM TRA LẠI ĐƯỜNG DẪN NÀY TRONG THƯ MỤC CỦA BẠN */
    background-image: url('../assets/alina.png'); /* Hoặc ảnh nền khác bạn muốn */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    z-index: -1;
    filter: brightness(0.6);
    transition: filter var(--transition-speed) ease; /* Thêm transition cho filter */
}

html[data-theme='light'] #lobby-screen::before {
    filter: brightness(0.85); /* Điều chỉnh độ sáng cho light mode */
}


.lobby-content {
    background-color: rgba(0, 0, 0, 0.65);
    padding: calc(var(--spacing-unit) * 5);
    border-radius: var(--border-radius-medium);
    max-width: 650px;
    width: 90%;
    box-shadow: var(--shadow-medium);
    transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
    position: relative;
    z-index: 1;
    border: 1px solid rgba(255, 255, 255, 0.1);
}
#lobby-screen:hover .lobby-content {
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.lobby-icon img {
    width: 100px;
    height: 100px;
    margin: 0 auto calc(var(--spacing-unit) * 2.5) auto;
    border-radius: var(--border-radius-circle);
    padding: var(--spacing-unit);
    background: rgba(255, 255, 255, 0.1);
    transition: background-color var(--transition-speed) ease;
}

#lobby-screen h2 {
    font-size: 2.5rem;
    margin-bottom: calc(var(--spacing-unit) * 2);
    letter-spacing: 1.5px;
    text-shadow: 2px 2px 6px rgba(0,0,0,0.7);
    transition: color var(--transition-speed) ease, text-shadow var(--transition-speed) ease;
}

#lobby-screen p {
    font-size: 1.1rem;
    max-width: 480px;
    margin: 0 auto;
    line-height: 1.8;
    transition: color var(--transition-speed) ease;
}

#music-selector-container {
    margin-top: calc(var(--spacing-unit) * 3);
    text-align: center;
}

#music-selector-icon {
    width: 40px;
    height: 40px;
    cursor: pointer;
    transition: transform var(--transition-speed) ease, opacity var(--transition-speed) ease;
}

#music-selector-icon:hover {
    transform: scale(1.1);
    opacity: 0.8;
}

/* ================== Song Selection Modal ================== */
#song-selection-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1500;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0s linear 0.3s;
}

#song-selection-modal.active {
     opacity: 1;
     visibility: visible;
     transition: opacity 0.3s ease, visibility 0s linear 0s;
}

#song-selection-modal.hidden { /* Vẫn giữ để JS có thể dùng nếu cần */
    display: none;
}

.modal-content {
    background-color: var(--color-bg-dark-2);
    padding: calc(var(--spacing-unit) * 3);
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-medium);
    max-width: 400px;
    width: 90%;
    text-align: left;
    transform: scale(0.95);
    opacity: 0;
    transition: transform 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28), opacity 0.3s ease, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
}

#song-selection-modal.active .modal-content {
    transform: scale(1);
    opacity: 1;
}


.modal-content h3 {
    margin-top: 0;
    margin-bottom: calc(var(--spacing-unit) * 2);
    color: var(--color-text-headings);
}

#song-list {
    list-style: none;
    padding: 0;
    margin: 0 0 calc(var(--spacing-unit) * 2) 0;
}

#song-list li {
    padding: var(--spacing-unit);
    cursor: pointer;
    border-bottom: 1px solid var(--color-border);
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, border-color var(--transition-speed) ease;
    color: var(--color-text-light);
    border-radius: var(--border-radius-small); /* Thêm bo góc nhẹ */
}
#song-list li:last-child {
    border-bottom: none;
}
#song-list li:hover, #song-list li:focus-visible { /* Thêm focus-visible */
    background-color: var(--color-border);
    color: var(--color-accent-hover);
    outline: none; /* Bỏ outline mặc định vì đã có style hover */
}


#close-modal {
    display: block;
    width: 100%;
    margin-top: calc(var(--spacing-unit) * 2);
}

/* ================== Main Content ================== */
#main-content {
    background-color: var(--color-bg-dark-1);
    padding: 0; /* Đã có */
    /* justify-content: flex-start; -- không cần thiết khi display: block */
    /* align-items: stretch; -- không cần thiết khi display: block */
    /* z-index: 99; -- z-index sẽ được quản lý bởi .active */
    transform: translateY(-20px); /* Hiệu ứng trượt ban đầu */
}

#main-content.active {
    position: static; /* Quan trọng để layout bình thường */
    display: block; /* Hiển thị nội dung theo dòng chảy */
    opacity: 1;
    visibility: visible;
    z-index: 102; /* Cao hơn lobby */
    min-height: 100vh;
    overflow-y: auto; /* Cho phép cuộn dọc nếu nội dung dài */
    overflow-x: hidden; /* Ngăn cuộn ngang */
    transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out, visibility 0s linear 0s;
    transform: translateY(0);
}
.main-container {
    max-width: 1100px;
    margin: calc(var(--spacing-unit) * 8) auto calc(var(--spacing-unit) * 5) auto;
    padding: 0 calc(var(--spacing-unit) * 2.5);
    width: 100%;
}

/* --- Header Profile --- */
.profile-header {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 6);
    padding-bottom: calc(var(--spacing-unit) * 3);
    border-bottom: 1px solid var(--color-border);
}

.profile-avatar {
    width: 100px;
    height: 100px;
    border-radius: var(--border-radius-circle);
    border: 3px solid var(--color-border);
    object-fit: cover;
    flex-shrink: 0;
    background-color: var(--color-bg-dark-2); /* Nền cho ảnh nếu ảnh có phần trong suốt */
}

.profile-details {
    flex-grow: 1;
}

.profile-details h1 {
    font-size: 2rem;
    margin-bottom: var(--spacing-unit);
    display: flex;
    align-items: center;
    gap: var(--spacing-unit);
    flex-wrap: wrap; /* Cho phép xuống dòng nếu tên quá dài */
}

.profile-avatar-container:hover .profile-avatar {
    transform: scale(1.08);
    box-shadow: 0 0 20px var(--color-accent-glow);
}
.profile-avatar-container:hover .avatar-glow-ring {
    opacity: 0.8;
    transform: scale(1.15);
}
.verified-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    background-color: var(--color-verified);
    border-radius: var(--border-radius-circle);
    flex-shrink: 0;
    color: white;
    font-size: 0.7em; /* Điều chỉnh kích thước dấu tick */
    line-height: 1; /* Đảm bảo dấu tick căn giữa */
}

.profile-meta {
    font-size: 0.95rem;
    color: var(--color-text-secondary);
    display: flex;
    flex-wrap: wrap;
    gap: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2.5); /* row-gap column-gap */
}
.profile-meta span, .profile-meta a {
    display: inline-flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 0.75); /* Điều chỉnh gap icon và text */
    color: var(--color-text-secondary);
}
.profile-meta a:hover,
.profile-meta a:focus-visible {
    color: var(--color-accent-hover);
    text-decoration: none; /* Bỏ gạch chân mặc định, giữ style của link */
}

/* --- Sections --- */
.content-section {
    margin-bottom: calc(var(--spacing-unit) * 5);
    padding: calc(var(--spacing-unit) * 3);
    background-color: var(--color-bg-dark-2);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
}

.content-section h2 {
    font-size: 1.5rem; /* Giữ nguyên hoặc 1.6rem tùy ý */
    color: var(--color-text-headings);
    margin-bottom: calc(var(--spacing-unit) * 3);
    padding-bottom: calc(var(--spacing-unit) * 1.5);
    border-bottom: 1px solid var(--color-border);
}

/* --- Bio --- */
#bio {
    border-left: 3px solid var(--color-accent);
    padding-left: calc(var(--spacing-unit) * 3.5);
}

#bio h2 {
    font-size: 1.6rem;
}

#bio p {
    margin-bottom: calc(var(--spacing-unit) * 2);
    line-height: 1.8;
    color: var(--color-text-light);
}

#bio strong {
    color: var(--color-text-headings);
    font-weight: 700;
}

.bio-focus-heading {
    font-size: 1.15rem;
    color: var(--color-accent);
    margin-top: calc(var(--spacing-unit) * 3);
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    font-weight: 600;
}

.bio-focus-list {
    list-style: none;
    padding-left: 0;
    margin-left: 0; /* Đảm bảo không có margin trái */
    margin-bottom: calc(var(--spacing-unit) * 2);
}

.bio-focus-list li {
    display: flex;
    align-items: flex-start;
    margin-bottom: calc(var(--spacing-unit) * 1.25);
    color: var(--color-text-light);
    padding-left: 0; /* Đảm bảo không có padding trái */
}

.bio-focus-icon {
    margin-right: calc(var(--spacing-unit) * 1.5);
    color: var(--color-accent-hover);
    flex-shrink: 0;
    margin-top: 0.2em; /* Điều chỉnh căn dọc icon emoji */
    width: 1.2em;
    text-align: center;
    font-size: 1.1em; /* Tăng nhẹ kích thước emoji */
}

.bio-motivation {
    font-style: italic;
    color: var(--color-text-secondary);
    border-left: 2px solid var(--color-border);
    padding-left: calc(var(--spacing-unit) * 1.5);
    margin-top: calc(var(--spacing-unit) * 3);
}

/* ================== Projects Section ================== */
#projects

.projects-grid {
    display: grid;
    /* Mặc định 1 cột trên mobile, 2 cột trên tablet, 3 cột trên desktop lớn hơn */
    grid-template-columns: 1fr;
    gap: calc(var(--spacing-unit) * 3);
}

.project-item {
    background-color: var(--color-bg-dark-1); /* Hơi khác nền section một chút */
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    padding: calc(var(--spacing-unit) * 2.5);
    display: flex;
    flex-direction: column;
    transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease, border-color var(--transition-speed) ease;
    overflow: hidden; /* Để bo góc cho ảnh thumbnail */
}



.featured-link-thumbnail {
    width: 100%;
    height: 200px; /* Đặt chiều cao cố định hoặc tỷ lệ aspect-ratio */
    object-fit: cover; /* Đảm bảo ảnh fill mà không bị méo */
    border-radius: var(--border-radius-small); /* Bo góc nhẹ cho ảnh */
    margin-bottom: calc(var(--spacing-unit) * 2);
    border: 1px solid var(--color-border); /* Viền nhẹ cho ảnh */
}

.project-item h3 {
    font-size: 1.3rem;
    color: var(--color-text-headings);
    margin-bottom: var(--spacing-unit);
}

.project-item p {
    font-size: 0.95rem;
    color: var(--color-text-light);
    line-height: 1.6;
    margin-bottom: calc(var(--spacing-unit) * 2);
    flex-grow: 1; /* Đẩy nút xuống dưới nếu mô tả ngắn */
}

.featured-link-actions {
    margin-top: auto; /* Đẩy cụm nút xuống dưới cùng */
    display: flex;
    gap: calc(var(--spacing-unit) * 1.5);
    flex-wrap: wrap; /* Cho phép nút xuống dòng nếu không đủ chỗ */
}

.featured-link-actions .btn {
    flex-grow: 1; /* Các nút sẽ cố gắng chiếm không gian bằng nhau */
}
@media (min-width: 580px) { /* Cho 2 nút nằm trên 1 hàng nếu đủ rộng */
    .featured-link-actions .btn {
        flex-grow: 0;
    }
}


/* Responsive cho Projects Grid */
@media (min-width: 768px) {
    .featured-links-grid {
        grid-template-columns: repeat(2, 1fr); /* 2 cột trên tablet */
    }
}

@media (min-width: 1024px) {
    .featured-links-grid {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Linh hoạt hơn trên desktop */
        /* Hoặc cố định 3 cột: grid-template-columns: repeat(3, 1fr); */
    }
}


/* --- Payment --- */
.payment-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: calc(var(--spacing-unit) * 2);
}
.payment-item {
    background-color: var(--color-bg-dark-1);
    padding: calc(var(--spacing-unit) * 2);
    border-radius: var(--border-radius-small);
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 0.75);
    transition: border-color var(--transition-speed) ease, transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}
.project-item:hover,
.testimonial-item:hover,
.payment-item:hover {
    transform: translateY(-6px) scale(1.02); /* Nâng cao hơn */
    box-shadow: var(--shadow-large); /* Bóng đổ lớn hơn */
    border-color: var(--color-accent-hover);
}

.payment-item-header {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 1);
}

.payment-logo {
    height: 20px;
    width: auto;
    max-width: 40px;
    object-fit: contain;
    flex-shrink: 0;
}

.payment-label {
    font-weight: 600;
    color: var(--color-text-headings);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    line-height: 1.2;
}

.payment-value {
    color: var(--color-text-secondary);
    word-break: break-all;
    font-family: monospace;
    font-size: 1rem;
    line-height: 1.4;
}

.payment-provider {
    font-size: 0.8rem;
    color: var(--color-text-secondary);
    margin-top: auto;
    padding-top: calc(var(--spacing-unit) * 0.5);
    align-self: flex-end;
    text-transform: uppercase;
}
/* --- Skills --- */
.skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: calc(var(--spacing-unit) * 3);
}
.skill-category h3 {
    font-size: 1.15rem;
    color: var(--color-text-headings);
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    padding-bottom: var(--spacing-unit);
    border-bottom: 1px solid var(--color-border);
}
.skill-tags {
    list-style: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-unit);
}
.skill-tags li {
    background-color: var(--color-border);
    color: var(--color-text-light);
    padding: calc(var(--spacing-unit) * 0.75) calc(var(--spacing-unit) * 1.5);
    border-radius: var(--border-radius-large);
    font-size: 0.875rem;
    transition: background-color 0.3s ease, transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), color 0.3s ease, box-shadow 0.3s ease;
    position: relative;
    overflow: hidden;
    z-index: 1;
    cursor: default;
}

.skill-tags li::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, var(--color-accent), var(--color-accent-hover));
    transition: left 0.4s ease-out;
    z-index: -1;
    border-radius: var(--border-radius-large);
}

.skill-tags li:hover {
    color: var(--color-bg-dark-1);
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 5px 12px rgba(88, 166, 255, 0.3);
}

.skill-tags li:hover::before {
    left: 0;
}

/* ================== Form Styles (Nếu có form liên hệ sau này) ================== */
label {
  display: block;
  margin-bottom: calc(var(--spacing-unit) * 0.75);
  font-weight: 600;
  color: var(--color-text-secondary);
  font-size: 0.9rem;
}

input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
input[type="number"],
input[type="tel"],
input[type="url"],
textarea,
select {
  font-family: inherit;
  font-size: 1rem;
  padding: calc(var(--spacing-unit) * 1.25) calc(var(--spacing-unit) * 1.5);
  background-color: var(--color-bg-dark-1);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-small);
  color: var(--color-text-light);
  transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease, color var(--transition-speed) ease;
  display: block;
  width: 100%;
}

input[type="text"]:focus-visible,
input[type="email"]:focus-visible,
input[type="password"]:focus-visible,
input[type="search"]:focus-visible,
input[type="number"]:focus-visible,
input[type="tel"]:focus-visible,
input[type="url"]:focus-visible,
textarea:focus-visible,
select:focus-visible {
  border-color: var(--color-accent);
  box-shadow: 0 0 0 3px var(--color-focus-shadow);
  outline: none;
}

textarea {
    min-height: 120px;
    resize: vertical;
}

select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%238b949e'%3E%3Cpath fill-rule='evenodd' d='M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right calc(var(--spacing-unit) * 1.5) center;
    background-size: 16px 16px;
    padding-right: calc(var(--spacing-unit) * 4);
}

html[data-theme='light'] select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%2357606a'%3E%3Cpath fill-rule='evenodd' d='M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z'/%3E%3C/svg%3E");
}


input.form-control-error,
textarea.form-control-error,
select.form-control-error {
    border-color: var(--color-danger) !important; /* Thêm !important nếu cần ghi đè */
}
input.form-control-error:focus-visible,
textarea.form-control-error:focus-visible,
select.form-control-error:focus-visible {
    border-color: var(--color-danger) !important;
    box-shadow: 0 0 0 3px rgba(248, 81, 73, 0.4) !important;
}

/* ================== Footer ================== */
.page-footer {
    margin-top: calc(var(--spacing-unit) * 6);
    padding: calc(var(--spacing-unit) * 3) 0;
    border-top: 1px solid var(--color-border);
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    gap: calc(var(--spacing-unit) * 2);
    font-size: 0.9rem;
    color: var(--color-text-secondary);
}

.footer-quote {
    display: flex;
    align-items: center;
    gap: var(--spacing-unit);
}

.status-indicator {
    width: 12px;
    height: 12px;
    background-color: var(--color-success);
    border-radius: var(--border-radius-circle);
    flex-shrink: 0;
    box-shadow: 0 0 8px var(--color-success);
    animation: pulse 2s infinite ease-in-out;
}

@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(52, 168, 83, 0.7); opacity: 1;}
    70% { box-shadow: 0 0 0 10px rgba(52, 168, 83, 0); opacity: 0.5; }
    100% { box-shadow: 0 0 0 0 rgba(52, 168, 83, 0); opacity: 1;}
}

html[data-theme='light'] .status-indicator {
    animation-name: pulse-light; /* Sử dụng keyframes pulse-light đã định nghĩa */
}


.footer-actions {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 1.5);
}

/* ================== Controls Container (Volume + Clock) ================== */
#controls-container {
    position: fixed;
    bottom: calc(var(--spacing-unit) * 2);
    right: calc(var(--spacing-unit) * 2);
    z-index: 1000;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: calc(var(--spacing-unit) * 0.75);
}

#volume-btn {
    background-color: rgba(13, 17, 23, 0.7);
    backdrop-filter: blur(5px);
    color: var(--color-text-light);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-circle);
    width: 40px;
    height: 40px;
    font-size: 20px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, box-shadow var(--transition-speed) ease, transform var(--transition-speed) ease, border-color var(--transition-speed) ease;
}
#volume-btn:hover {
    background-color: rgba(30, 36, 45, 0.8);
    transform: scale(1.1);
}
#volume-btn:focus-visible {
    box-shadow: 0 0 0 3px var(--color-focus-shadow);
    transform: scale(1.1);
}

#volume-btn.muted {
    color: var(--color-text-secondary);
}
#volume-btn.muted:hover {
    color: var(--color-text-light);
}

#clock {
    background-color: rgba(13, 17, 23, 0.7);
    backdrop-filter: blur(5px);
    color: var(--color-text-light);
    padding: calc(var(--spacing-unit) * 0.5) var(--spacing-unit);
    border-radius: var(--border-radius-small);
    font-size: 1rem;
    font-family: 'Courier New', Courier, monospace;
    border: 1px solid var(--color-border);
    user-select: none;
    transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, border-color var(--transition-speed) ease;
}

/* ================== Volume Slider Styles ================== */
#volume-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 80px;
    height: 6px;
    background: var(--color-border);
    border-radius: 3px;
    outline: none;
    cursor: pointer;
    margin-bottom: calc(var(--spacing-unit) * 1);
    transition: opacity 0.3s ease, visibility 0.3s ease, height 0.3s ease, margin-bottom 0.3s ease, box-shadow var(--transition-speed) ease, background-color var(--transition-speed) ease;
    vertical-align: middle;
}

#volume-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: var(--color-accent);
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid var(--color-bg-dark-1); /* Màu nền của thumb để tạo hiệu ứng nổi */
    transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease, border-color var(--transition-speed) ease;
}
#volume-slider:hover::-webkit-slider-thumb,
#volume-slider:focus-visible::-webkit-slider-thumb {
    background-color: var(--color-accent-hover);
    transform: scale(1.1);
}

#volume-slider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: var(--color-accent);
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid var(--color-bg-dark-1);
    transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease, border-color var(--transition-speed) ease;
}
#volume-slider:hover::-moz-range-thumb,
#volume-slider:focus-visible::-moz-range-thumb {
     background-color: var(--color-accent-hover);
     transform: scale(1.1);
}
#volume-slider::-moz-range-track { /* Đảm bảo track cũng có transition */
    width: 100%;
    height: 6px;
    cursor: pointer;
    background: var(--color-border);
    border-radius: 3px;
    transition: background-color var(--transition-speed) ease;
}


#volume-slider.hidden {
    opacity: 0;
    visibility: hidden;
    height: 0;
    margin-bottom: 0;
    pointer-events: none;
}

#volume-slider:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px var(--color-focus-shadow);
}


/* ================== Prompt Dialog Styles (Music Prompt) ================== */
.prompt-overlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--transition-speed) ease, visibility 0s linear var(--transition-speed), background-color var(--transition-speed) ease;
}

.prompt-overlay.active {
    opacity: 1;
    visibility: visible;
    transition: opacity var(--transition-speed) ease, visibility 0s linear 0s, background-color var(--transition-speed) ease;
}

.prompt-box {
    background-color: var(--color-bg-dark-2);
    padding: calc(var(--spacing-unit) * 4);
    border-radius: var(--border-radius-medium);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-medium);
    text-align: center;
    max-width: 420px;
    width: 90%;
    transform: scale(0.95);
    opacity: 0;
    transition: transform var(--transition-speed) cubic-bezier(0.18, 0.89, 0.32, 1.28), opacity var(--transition-speed) ease, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease;
}

.prompt-overlay.active .prompt-box {
    transform: scale(1);
    opacity: 1;
}

.prompt-box p {
    margin-bottom: calc(var(--spacing-unit) * 3);
    color: var(--color-text-light);
    font-size: 1.1rem;
    line-height: 1.6;
}

.prompt-actions-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: calc(var(--spacing-unit) * 2.5);
    margin-top: calc(var(--spacing-unit) * 3);
}

.prompt-buttons {
    display: flex;
    justify-content: center;
    gap: calc(var(--spacing-unit) * 2);
    width: 100%;
}

.prompt-checkbox-area {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: calc(var(--spacing-unit) * 1);
    font-size: 0.9rem;
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: color var(--transition-speed) ease;
}
.prompt-checkbox-area:hover {
    color: var(--color-text-light);
}

.prompt-checkbox-area label {
    cursor: pointer;
    margin-bottom: 0;
    font-weight: normal;
    color: inherit; /* Kế thừa màu từ parent */
}

.prompt-checkbox-area input[type="checkbox"] {
    cursor: pointer;
    width: 18px;
    height: 18px;
    accent-color: var(--color-accent); /* Màu của checkbox khi được chọn */
    margin-right: calc(var(--spacing-unit) * 0.5);
    flex-shrink: 0;
}

/* ================== Responsive Design ================== */
@media (max-width: 768px) {
    :root {
        --spacing-unit: 7px;
        --font-size-base: 15px;
    }
    h1 { font-size: 2rem; }
    h2 { font-size: 1.6rem; }
    h3 { font-size: 1.2rem; }

    .main-container {
        margin-top: calc(var(--spacing-unit) * 6);
        padding: 0 calc(var(--spacing-unit) * 1.5);
    }
    .profile-header {
        flex-direction: column;
        align-items: flex-start; /* Căn trái các item khi xếp dọc */
        gap: calc(var(--spacing-unit) * 2);
    }
    .profile-avatar { width: 80px; height: 80px; }
    .profile-details h1 { font-size: 1.8rem; }

    .payment-grid {
        grid-template-columns: 1fr; /* 1 cột trên mobile */
        gap: calc(var(--spacing-unit) * 1.5);
    }
    /* .picture-gallery đã được thay thế/gộp vào .projects-grid nếu có */
    /* Nếu bạn muốn giữ .picture-gallery riêng, hãy thêm style cho nó ở đây */

    .skills-grid {
         grid-template-columns: 1fr; /* 1 cột trên mobile */
         gap: calc(var(--spacing-unit) * 2.5);
    }

    .projects-grid { /* Đảm bảo projects grid cũng 1 cột trên mobile */
        grid-template-columns: 1fr;
    }


    .page-footer {
        flex-direction: column;
        align-items: flex-start; /* Căn trái footer items */
        text-align: left;
        gap: calc(var(--spacing-unit) * 1.5);
    }
    .footer-actions {
        width: 100%;
        margin-top: var(--spacing-unit);
        justify-content: flex-start; /* Nút ở footer căn trái */
    }
}

@media (max-width: 480px) {
    :root {
        --spacing-unit: 6px;
        --font-size-base: 14px;
    }
    h1 { font-size: 1.8rem; }
    h2 { font-size: 1.4rem; }
    h3 { font-size: 1.1rem; }

    .btn { padding: calc(var(--spacing-unit) * 1.2) calc(var(--spacing-unit) * 2); }
    .btn-small { padding: calc(var(--spacing-unit) * 0.8) calc(var(--spacing-unit) * 1.2); }

    .lobby-content { padding: calc(var(--spacing-unit) * 4); max-width: 95%; }
    #lobby-screen h2 { font-size: 2rem; }
    #lobby-screen p { font-size: 1rem; }

    .profile-avatar { width: 70px; height: 70px; }
    .profile-details h1 { font-size: 1.6rem; }
    .main-container { margin-top: calc(var(--spacing-unit) * 5); padding: 0 var(--spacing-unit); }

    /* Controls nhỏ hơn */
    #controls-container {
        bottom: var(--spacing-unit);
        right: var(--spacing-unit);
    }
    #volume-btn {
        width: 35px;
        height: 35px;
        font-size: 18px;
    }
    #clock {
        font-size: 0.85rem;
        padding: calc(var(--spacing-unit) * 0.4) calc(var(--spacing-unit) * 0.8);
    }
     #volume-slider {
        width: 70px;
    }

    /* Prompt nhỏ hơn và nút full width */
    .prompt-box {
        padding: calc(var(--spacing-unit) * 3);
    }
    .prompt-box p {
        font-size: 1rem;
    }
     .prompt-checkbox-area {
        font-size: 0.85rem;
    }
    .prompt-buttons {
        flex-direction: column;
        gap: var(--spacing-unit);
    }
    .prompt-buttons .btn {
        width: 100%;
    }

    .project-item h3 {
        font-size: 1.15rem; /* Giảm size chữ tiêu đề dự án trên mobile nhỏ */
    }
    .project-item p {
        font-size: 0.9rem; /* Giảm size chữ mô tả dự án */
    }
    .featured-link-actions {
        flex-direction: column; /* Nút trong project item xếp dọc */
    }
    .featured-link-actions .btn {
        width: 100%; /* Nút full width */
    }

}

/* ================== Print Styles ================== */
@media print {
   :root {
       --color-bg-dark-1: #ffffff;
       --color-bg-dark-2: #ffffff;
       --color-border: #dddddd;
       --color-text-light: #000000;
       --color-text-secondary: #333333;
       --color-text-headings: #000000;
       --color-accent: #0000ff;
       --color-accent-hover: #0000ff;
   }

   body {
       background-color: var(--color-bg-dark-1);
       color: var(--color-text-light);
       font-size: 11pt;
       line-height: 1.4;
   }

   #loading-screen,
   #lobby-screen,
   #controls-container,
   .prompt-overlay,
   .page-footer .footer-actions button, /* Ẩn nút theme toggle */
   .profile-header .btn, /* Ẩn nút không cần thiết khi in */
   #bio .btn,
   .featured-link-actions, /* Ẩn các nút trong project item */
   .skill-tags li:hover, /* Bỏ hiệu ứng hover */
   .loading-bar,
   .status-indicator,
   .verified-badge,
   #music-selector-container,
   #song-selection-modal,
   #lightbox-overlay
   {
       display: none !important;
   }

   #main-content, #main-content.active {
       position: static !important;
       display: block !important;
       opacity: 1 !important;
       visibility: visible !important;
       min-height: auto !important;
       overflow: visible !important;
       transform: none !important; /* Bỏ transform khi in */
   }

   .main-container {
       max-width: 100%;
       margin: 2cm auto; /* Canh lề cho trang in */
       padding: 0 1cm; /* Padding cho nội dung in */
   }

   .content-section,
   .payment-item,
   .project-item, /* Áp dụng style in cho project item */
   .profile-header,
   .page-footer {
       border: 1px solid var(--color-border);
       box-shadow: none;
       background-color: transparent;
       margin-bottom: calc(var(--spacing-unit) * 1.5); /* Giảm margin khi in */
       padding: calc(var(--spacing-unit) * 0.75); /* Giảm padding khi in */
       break-inside: avoid; /* Tránh ngắt trang giữa chừng */
   }

    .featured-link-thumbnail {
        max-height: 150px; /* Giới hạn chiều cao ảnh dự án khi in */
        border: 1px solid #ccc;
        filter: grayscale(100%);
    }
    .project-item h3, .project-item p {
        color: #000 !important; /* Đảm bảo chữ đen khi in */
    }


   h1, h2, h3, h4, h5, h6 {
       color: var(--color-text-headings);
       break-after: avoid; /* Tránh ngắt trang sau tiêu đề */
   }

   a {
       color: var(--color-accent);
       text-decoration: underline;
   }
   a[href^="http"]::after {
       content: " (" attr(href) ")";
       font-size: 9pt;
       color: #555;
       word-break: break-all;
   }
   a[href^="#"]::after, a:not([href])::after, a[href^="mailto:"]::after, a[href^="tel:"]::after {
       content: "";
   }


   .profile-avatar, .payment-logo {
       border: 1px solid #ccc;
       box-shadow: none;
       transform: none !important;
       filter: grayscale(100%);
       padding: 2px;
   }
   .payment-logo {
       height: 16px;
       max-width: 30px;
   }

   .payment-grid, .skills-grid, .projects-grid { /* Áp dụng cho projects grid */
       grid-template-columns: 1fr; /* 1 cột khi in */
       gap: calc(var(--spacing-unit) * 0.5);
   }
   .payment-item, .project-item { padding: calc(var(--spacing-unit) * 0.5); }
   .skill-tags li { background-color: #eee; color: #000; padding: 2px 6px; font-size: 9pt; border-radius: 3px;}

   .page-footer { justify-content: flex-start; }
   .footer-quote { margin-right: 2em; }
   .footer-actions a[href*="github.com"] { /* Chỉ giữ lại link github ở footer khi in */
        display: inline-flex !important; /* Hiển thị lại nút github */
   }


} /* Kết thúc @media print */

/* CSS cho hiệu ứng fade-in của content-section */
@keyframes fadeInAnimation {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.content-section {
    opacity: 0;
    /* transform: translateY(20px); -- Bỏ transform ở đây, để animation xử lý */
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.content-section.visible {
    opacity: 1;
    animation: fadeInAnimation 0.8s ease-out forwards;
}


/* ================== Lightbox Styles ================== */
.lightbox-overlay {
    position: fixed;
    inset: 0;
    background-color: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(5px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0s linear 0.3s, background-color var(--transition-speed) ease;
}
.lightbox-overlay.visible {
    opacity: 1;
    visibility: visible;
    transition: opacity 0.3s ease, visibility 0s linear 0s, background-color var(--transition-speed) ease;
}
.lightbox-overlay.hidden {
     display: none;
}

#lightbox-image {
    max-width: 90%;
    max-height: 85%;
    object-fit: contain;
    border-radius: var(--border-radius-medium);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
}

#lightbox-close {
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 3rem;
    color: #fff;
    cursor: pointer;
    transition: transform 0.2s ease, color var(--transition-speed) ease;
    line-height: 1; /* Đảm bảo nút X căn giữa */
    padding: var(--spacing-unit); /* Tăng vùng click */
    background: rgba(0,0,0,0.3); /* Nền nhẹ cho dễ thấy */
    border-radius: 50%;
}
#lightbox-close:hover, #lightbox-close:focus-visible {
    transform: scale(1.1);
    color: var(--color-accent-hover);
    background: rgba(0,0,0,0.5);
    outline: none;
}

/* --- Styles for PNG Icons (Đã có, giữ lại) --- */
.icon {
    display: inline-block;
    vertical-align: middle;
    width: 24px; /* Chuẩn hóa kích thước icon */
    height: 24px; /* Chuẩn hóa kích thước icon */
    flex-shrink: 0;
    object-fit: contain; /* Đảm bảo icon không bị méo */
}

.profile-meta span .icon, /* Cụ thể hơn cho icon trong profile meta */
.profile-meta a .icon {
     margin-right: calc(var(--spacing-unit) * 0.75);
     width: 18px; /* Icon nhỏ hơn trong meta */
     height: 18px;
}

.bio-focus-list li .bio-focus-icon
.contact-link-item .icon { /* Icon trong contact links */
     width: 24px;
     height: 24px;
     /* margin-right đã được xử lý bằng gap của flex container */
}


/* ================== Contact Links Styles (Đã có, giữ lại) ================== */
.contact-links-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: calc(var(--spacing-unit) * 2);
    margin-top: calc(var(--spacing-unit) * 3);
}

.contact-link-item {
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 1.5);
    padding: calc(var(--spacing-unit) * 1.5);
    background-color: var(--color-bg-dark-1);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    color: var(--color-text-light);
    text-decoration: none;
    transition: background-color var(--transition-speed) ease,
                transform var(--transition-speed) ease,
                border-color var(--transition-speed) ease,
                color var(--transition-speed) ease,
                box-shadow var(--transition-speed) ease; /* Thêm box-shadow vào transition */
}

.contact-link-item:hover,
.contact-link-item:focus-visible {
    background-color: var(--color-bg-dark-2);
    border-color: var(--color-accent);
    transform: translateY(-3px);
    color: var(--color-accent-hover);
    text-decoration: none;
    box-shadow: 0 3px 10px rgba(88, 166, 255, 0.1);
}

/* Điều chỉnh cho Light Mode Contact Links */
html[data-theme='light'] .contact-link-item { /* Cần target cụ thể hơn */
     background-color: var(--color-bg-light-1);
     border: 1px solid var(--color-border-light);
     color: var(--color-text-dark);
}
html[data-theme='light'] .contact-link-item:hover,
html[data-theme='light'] .contact-link-item:focus-visible {
     background-color: var(--color-bg-light-2);
     border-color: var(--color-accent-light);
     color: var(--color-accent-hover-light);
     box-shadow: 0 3px 10px rgba(9, 105, 218, 0.08);
 }

 /* --- Testimonials --- */
.testimonials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: calc(var(--spacing-unit) * 3);
    margin-top: calc(var(--spacing-unit) * 2);
}

.testimonial-item {
    background-color: var(--color-bg-dark-1); /* Hoặc màu nền khác tùy theme */
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    padding: calc(var(--spacing-unit) * 2.5);
    display: flex;
    flex-direction: column; /* Hoặc row nếu muốn avatar và content ngang hàng */
    align-items: center; /* Căn giữa nếu avatar ở trên */
    text-align: center; /* Căn giữa text nếu avatar ở trên */
}

html[data-theme='light'] .testimonial-item {
    background-color: var(--color-bg-light-1);
    border-color: var(--color-border-light);
}

.testimonial-avatar {
    width: 80px;
    height: 80px;
    border-radius: var(--border-radius-circle);
    object-fit: cover;
    margin-bottom: calc(var(--spacing-unit) * 2);
    border: 2px solid var(--color-accent);
}

.testimonial-content blockquote {
    margin-bottom: calc(var(--spacing-unit) * 1.5);
    font-style: italic;
    color: var(--color-text-secondary);
    position: relative;
    padding: 0 calc(var(--spacing-unit) * 1.5);
}
.testimonial-content blockquote p {
    margin-bottom: 0; /* Bỏ margin mặc định của p trong blockquote */
}

.testimonial-content blockquote::before,
.testimonial-content blockquote::after {
    content: '"';
    font-size: 2.5rem;
    color: var(--color-accent);
    opacity: 0.6;
    position: absolute;
    line-height: 1;
}

.testimonial-content blockquote::before {
    top: -5px;
    left: -5px;
}

.testimonial-content blockquote::after {
    bottom: -15px; /* Điều chỉnh cho phù hợp */
    right: -5px;
}


.testimonial-content cite {
    font-weight: 600;
    color: var(--color-text-light);
    font-style: normal;
}
.testimonial-content cite span {
    display: block;
    font-size: 0.9rem;
    color: var(--color-text-secondary);
    margin-top: calc(var(--spacing-unit) * 0.5);
}

/* ================== Click Emoji Effect ================== */
.click-emoji {
    position: absolute; /* Để định vị dựa trên vị trí click */
    font-size: 1.5rem; /* Kích thước emoji, bạn có thể điều chỉnh */
    user-select: none; /* Ngăn người dùng chọn emoji */
    pointer-events: none; /* Để click "xuyên qua" emoji, không ảnh hưởng đến các element khác */
    z-index: 9999; /* Đảm bảo emoji luôn ở trên cùng */
    animation: floatUpAndFade 1s ease-out forwards;
    /* Hiệu ứng bay lên và mờ dần trong 1 giây */
}

@keyframes floatUpAndFade {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
    100% {
        opacity: 0;
        transform: translateY(-60px) scale(1.5); /* Bay lên 60px và to ra một chút */
    }
}
/* ================== Skills Category Styles ================== */
.skill-category {
    background-color: var(--color-bg-dark-1);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius-medium);
    padding: calc(var(--spacing-unit) * 2.5);
    margin-bottom: calc(var(--spacing-unit) * 3);
    display: flex;
    flex-direction: column;
    gap: calc(var(--spacing-unit) * 1.5);
}

/* ================== Toast Notifications ================== */
#toast-container {
    position: fixed;
    top: calc(var(--spacing-unit) * 2.5); /* Cách top một chút */
    right: calc(var(--spacing-unit) * 2.5); /* Cách phải một chút */
    z-index: 10002; /* Phải cao hơn các phần tử khác, kể cả custom cursor nếu có */
    display: flex;
    flex-direction: column;
    align-items: flex-end; /* Căn các toast về bên phải */
    gap: calc(var(--spacing-unit) * 1.25);
    width: auto; /* Để container co giãn theo nội dung toast */
    max-width: calc(100% - var(--spacing-unit) * 5); /* Tránh tràn màn hình nhỏ */
}

.toast {
    background-color: var(--color-bg-dark-3);
    color: var(--color-text-light);
    padding: calc(var(--spacing-unit) * 1.8) calc(var(--spacing-unit) * 2.5);
    border-radius: var(--border-radius-medium);
    box-shadow: var(--shadow-large); /* Tăng bóng đổ cho nổi bật */
    display: flex;
    align-items: center;
    gap: calc(var(--spacing-unit) * 1.25);
    font-size: 0.95rem;
    border-left: 5px solid transparent; /* Viền màu để phân biệt loại toast */
    word-break: break-word;
    min-width: 280px; /* Chiều rộng tối thiểu */
    max-width: 350px; /* Chiều rộng tối đa */

    /* Trạng thái ban đầu (ẩn) và transition */
    opacity: 0;
    transform: translateX(120%); /* Bắt đầu từ ngoài màn hình bên phải */
    transition: opacity var(--transition-speed-slow) cubic-bezier(0.25, 0.46, 0.45, 0.94),
                transform var(--transition-speed-slow) cubic-bezier(0.25, 0.46, 0.45, 0.94);
    pointer-events: none; /* Khi ẩn thì không cho tương tác */
}

.toast.show {
    opacity: 1;
    transform: translateX(0);
    pointer-events: auto; /* Khi hiện thì cho tương tác */
}

/* Class .hide sẽ được JS thêm vào để đảm bảo toast ẩn nếu transition không chạy đúng */
/* Tuy nhiên, việc xóa class .show thường là đủ để kích hoạt transition ngược lại */
.toast.hide {
    opacity: 0 !important; /* Ép opacity về 0 */
    transform: translateX(120%) !important; /* Ép transform */
    pointer-events: none !important;
}

.toast i { /* FontAwesome icon styling */
    font-size: 1.3em;
    line-height: 1;
    flex-shrink: 0; /* Đảm bảo icon không bị co lại */
}

.toast-success {
    border-left-color: var(--color-success);
    background-color: var(--color-success); /* Nền màu để dễ nhận biết */
    color: white;
}
.toast-error   {
    border-left-color: var(--color-danger);
    background-color: var(--color-danger);
    color: white;
}
.toast-info    {
    border-left-color: var(--color-accent);
    background-color: var(--color-accent);
    color: var(--color-bg-dark-1); /* Chữ tối trên nền accent sáng */
}
.toast-warning {
    border-left-color: #ffc107;
    background-color: #ffc107;
    color: var(--color-text-dark); /* Chữ tối trên nền vàng */
}

/* Light theme overrides cho toast */
html[data-theme='light'] .toast {
    background-color: var(--color-bg-light-1);
    color: var(--color-text-dark);
    box-shadow: 0 4px 18px rgba(0,0,0,0.15);
    border: 1px solid var(--color-border-light);
    border-left-width: 5px; /* Giữ viền màu */
}
html[data-theme='light'] .toast-success,
html[data-theme='light'] .toast-error,
html[data-theme='light'] .toast-info {
    color: white; /* Giữ chữ trắng cho các toast có màu nền */
}
html[data-theme='light'] .toast-info {
    background-color: var(--color-accent-light);
    border-left-color: var(--color-accent-light);
}
html[data-theme='light'] .toast-warning {
    color: var(--color-text-dark); /* Giữ chữ tối cho warning */
}